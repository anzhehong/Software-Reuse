# 软件复用管理文档


# 项目组成员

| 姓名        | 学生账号           | Github Id  |
| ------------- |:-------------:| -----:|
| 林思妙| 1352849 | [linsimiao](https://github.com/linsimiao) | 
|  康慧琳     | 1352871      |   [1352871](https://github.com/1352871)|
| 安哲宏 | 1352834 | [anzhehong](https://github.com/anzhehong) |
| 张嘉琦 | 1352863      |   [kobpko](https://github.com/kobpko)  |

***


#项目管理文档一
>2016.03.29


<!--- 单元测试
 - 产品文档-->
 
 
## 需求分析及概要设计

### 功能

该项目要求我们实现从客户端发送消息到服务端，服务端再将收到的消息转发给其他客户端。概括下来主要有以下功能：

- 用户注册
- 用户登录（optional）
- 用户发送消息给服务端，服务端有选择接收消息并转发给其他客户
- 记录用户发送的消息和服务端接收的消息
- 消息转发限制机制和断线重连机制


<!--项目功能主要分为Client和Server两部分。

- Server

  Server端主要提供判断用户登录是否成功功能和从客户端接收消息并转发功能。
Server有两种队列，一种是公有队列，一种是私有队列。公有队列负责记录用户登录的状态。它的每个私有队列分别对应一个client，用来接受客户发送的消息。初此之外，还通过Topic向所有用户转发消息。

- Client

  Client端主要提供用户登录以及向服务端发送消息和接收服务端的消息的功能。
Client 客户端在开启时会借由ActiveMQ消息中间件，通过Server的公有消息通道向Server传入用户名和密码，请求服务。如果收到登录成功的确认消息，即成功开启客户端，通过Server建立的私有消息队列传给Server消息，并接收返回的结果。如果在发送消息的过程中超过了limit（每秒发送超过5条消息或者累积发送超过100条消息），则断开连接重新登录。-->

### 系统用例
<!--![usercase](http://7xsf2g.com1.z0.glb.clouddn.com/reuse-usercase.png)-->

![UseCase](http://7xsf2g.com1.z0.glb.clouddn.com/reuse-Naughty_usecase.png)

根据需求分析我们做出了如上用例图。
> 说明：
> 其中'C-S Messages'表示client向server 发送的消息；'S-C'正好与其相反。



### 非功能
> 由于本次项目要求中并没有提及明确的非功能性需求，因此我们在架构中初步考虑了诸如安全性等非功能行需求，但是还未进行实现。

### 架构
<!--![architecture](http://7xsf2g.com1.z0.glb.clouddn.com/reuse-16.pic_hd.jpg)-->
![](http://7xsf2g.com1.z0.glb.clouddn.com/reuse-architecture2.png)



## 重要组件的选择及理由
- Apache-Activemq

  1. Server和Client之间消息的传递，我们使用了`apache-activemq`消息中间件中的Queue模式。依其所提供的Producer -> Consumer 消息传递模式，将Server 作为
Consumer，将每一个Client 作为Producer，消息反向传递时consumer和producer互换，实现二者之间消息的互通。

  2. 利用`apache-activemq`的发布订阅模式(`Publish - Subscribe`)建立一个Server对消息的转发机制，即server收到的所有有效信息都会被转发到特定的topic中供subscriber进行接收。
  3. 默认地址是`tcp://localhost:61616`

- JUnit 

  使用了JUnit 4.0 来进行单元测试。

- Spring+Hibernate

  使用了Spring+Hibernate来搭建项目的基本框架。数据库地址在阿里云服务器。

> 使用这个框架看起来有点大，之所以选择比较完备的项目框架是为了提高后期的可扩展性。

## 计划/总结，分工/完成情况
### 计划
1. 理清项目需求
2. 考虑项目架构
3. 选择重要组件
4. 搭建项目框架
5. 完成基本通讯
6. 测试基本通讯
7. 完成消息限制
8. 测试消息限制
9. 完成日志功能
10. 测试日志功能

### 分工说明
- 安哲宏：架构搭建、数据库搭建、信息发送限制
- 张嘉琦：封装Aqtivemq基本功能、通迅的连接及信息收发
- 康慧琳：前端设计、文档整理、单元测试
- 林思妙：文档整理、功能测试

### 完成和总结
项目组成员基本按照分工进行了项目贡献，并且实现项目需求。

> ***TODO:***
> 
> 1. 对项目框架进行更好的组织，达到更高的`高内聚，低耦合`
> 2. 提高项目可配置性
> 3. 性能提升
